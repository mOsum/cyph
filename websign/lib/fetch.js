/* https://github.com/github/fetch */

(function(t){"use strict";if(t.fetch){return}var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{new Blob;return true}catch(t){return false}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function r(t){if(typeof t!=="string"){t=String(t)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t)){throw new TypeError("Invalid character in header field name")}return t.toLowerCase()}function o(t){if(typeof t!=="string"){t=String(t)}return t}function n(t){var r={next:function(){var e=t.shift();return{done:e===undefined,value:e}}};if(e.iterable){r[Symbol.iterator]=function(){return r}}return r}function i(t){this.map={};if(t instanceof i){t.forEach(function(t,e){this.append(e,t)},this)}else if(t){Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}}i.prototype.append=function(t,e){t=r(t);e=o(e);var n=this.map[t];if(!n){n=[];this.map[t]=n}n.push(e)};i.prototype["delete"]=function(t){delete this.map[r(t)]};i.prototype.get=function(t){var e=this.map[r(t)];return e?e[0]:null};i.prototype.getAll=function(t){return this.map[r(t)]||[]};i.prototype.has=function(t){return this.map.hasOwnProperty(r(t))};i.prototype.set=function(t,e){this.map[r(t)]=[o(e)]};i.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(o){t.call(e,o,r,this)},this)},this)};i.prototype.keys=function(){var t=[];this.forEach(function(e,r){t.push(r)});return n(t)};i.prototype.values=function(){var t=[];this.forEach(function(e){t.push(e)});return n(t)};i.prototype.entries=function(){var t=[];this.forEach(function(e,r){t.push([r,e])});return n(t)};if(e.iterable){i.prototype[Symbol.iterator]=i.prototype.entries}function s(t){if(t.bodyUsed){return Promise.reject(new TypeError("Already read"))}t.bodyUsed=true}function a(t){return new Promise(function(e,r){t.onload=function(){e(t.result)};t.onerror=function(){r(t.error)}})}function u(t){var e=new FileReader;e.readAsArrayBuffer(t);return a(e)}function f(t){var e=new FileReader;e.readAsText(t);return a(e)}function h(){this.bodyUsed=false;this._initBody=function(t){this._bodyInit=t;if(typeof t==="string"){this._bodyText=t}else if(e.blob&&Blob.prototype.isPrototypeOf(t)){this._bodyBlob=t}else if(e.formData&&FormData.prototype.isPrototypeOf(t)){this._bodyFormData=t}else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this._bodyText=t.toString()}else if(!t){this._bodyText=""}else if(e.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(t)){}else{throw new Error("unsupported BodyInit type")}if(!this.headers.get("content-type")){if(typeof t==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(e.blob){this.blob=function(){var t=s(this);if(t){return t}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){return this.blob().then(u)};this.text=function(){var t=s(this);if(t){return t}if(this._bodyBlob){return f(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}else{this.text=function(){var t=s(this);return t?t:Promise.resolve(this._bodyText)}}if(e.formData){this.formData=function(){return this.text().then(c)}}this.json=function(){return this.text().then(JSON.parse)};return this}var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function p(t){var e=t.toUpperCase();return d.indexOf(e)>-1?e:t}function l(t,e){e=e||{};var r=e.body;if(l.prototype.isPrototypeOf(t)){if(t.bodyUsed){throw new TypeError("Already read")}this.url=t.url;this.credentials=t.credentials;if(!e.headers){this.headers=new i(t.headers)}this.method=t.method;this.mode=t.mode;if(!r){r=t._bodyInit;t.bodyUsed=true}}else{this.url=t}this.credentials=e.credentials||this.credentials||"omit";if(e.headers||!this.headers){this.headers=new i(e.headers)}this.method=p(e.method||this.method||"GET");this.mode=e.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&r){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(r)}l.prototype.clone=function(){return new l(this)};function c(t){var e=new FormData;t.trim().split("&").forEach(function(t){if(t){var r=t.split("=");var o=r.shift().replace(/\+/g," ");var n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}});return e}function y(t){var e=new i;var r=(t.getAllResponseHeaders()||"").trim().split("\n");r.forEach(function(t){var r=t.trim().split(":");var o=r.shift().trim();var n=r.join(":").trim();e.append(o,n)});return e}h.call(l.prototype);function b(t,e){if(!e){e={}}this.type="default";this.status=e.status;this.ok=this.status>=200&&this.status<300;this.statusText=e.statusText;this.headers=e.headers instanceof i?e.headers:new i(e.headers);this.url=e.url||"";this._initBody(t)}h.call(b.prototype);b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})};b.error=function(){var t=new b(null,{status:0,statusText:""});t.type="error";return t};var m=[301,302,303,307,308];b.redirect=function(t,e){if(m.indexOf(e)===-1){throw new RangeError("Invalid status code")}return new b(null,{status:e,headers:{location:t}})};t.Headers=i;t.Request=l;t.Response=b;t.fetch=function(t,r){return new Promise(function(o,n){var i;if(l.prototype.isPrototypeOf(t)&&!r){i=t}else{i=new l(t,r)}var s=new XMLHttpRequest;function a(){if("responseURL"in s){return s.responseURL}if(/^X-Request-URL:/m.test(s.getAllResponseHeaders())){return s.getResponseHeader("X-Request-URL")}return}s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:y(s),url:a()};var e="response"in s?s.response:s.responseText;o(new b(e,t))};s.onerror=function(){n(new TypeError("Network request failed"))};s.ontimeout=function(){n(new TypeError("Network request failed"))};s.open(i.method,i.url,true);if(i.credentials==="include"){s.withCredentials=true}if("responseType"in s&&e.blob){s.responseType="blob"}i.headers.forEach(function(t,e){s.setRequestHeader(e,t)});s.send(typeof i._bodyInit==="undefined"?null:i._bodyInit)})};t.fetch.polyfill=true})(typeof self!=="undefined"?self:this);
