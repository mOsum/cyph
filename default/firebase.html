<html><body>

<script src='https://www.gstatic.com/firebasejs/live/3.0/firebase.js'></script>
<script>
	try {
		firebase.initializeApp({
			apiKey: 'AIzaSyB7B8i8AQPtgMXS9o6zbfX1Vv-PwW2Q0Jo',
			authDomain: 'cyphme.firebaseapp.com',
			databaseURL: 'https://cyphme.firebaseio.com',
			storageBucket: 'cyphme.appspot.com'
		});


		function onmessage (e) {
			try {
				if (!e.data.command) {
					return;
				}

				var command			= e.data.command;
				var commandTarget	= firebase;

				while (command) {
					var key	= Object.keys(command).filter(function (k) {
						return k !== 'args' && k !== 'method';
					})[0];

					command	= command[key];
					if (!command) {
						break;
					}

					var args	= command.args || [];

					for (var i = 0 ; i < args.length ; ++i) {
						var arg			= args[i];
						var callbackId	= arg && arg.callbackId;

						if (callbackId) {
							args[i]	= function () {
								e.source.postMessage({
									callbackId: callbackId,
									args: JSON.stringify(Array.prototype.slice.call(arguments))
								}, e.origin);
							};
						}
					}

					if (command.method !== false) {
						commandTarget	= commandTarget[key].apply(commandTarget, args);
					}
					else {
						commandTarget	= commandTarget[key];
					}
				}
			}
			catch (_) {}
		}

		window.addEventListener('message', onmessage, false);
	}
	catch (_) {}
</script>

</body></html>
