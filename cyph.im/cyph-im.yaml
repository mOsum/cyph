application: cyphme
module: cyph-im
version: master
runtime: python27
api_version: 1
threadsafe: true

handlers:

# Main

- url: /
  static_files: index.html
  upload: index.html
  secure: always
  http_headers:
    Cache-Control: public, max-age=0
    X-Frame-Options: deny
    Public-Key-Pins: max-age=31536000; includeSubdomains; pin-sha256="8jdS3zcG5kUApHWDrLH5Q8wEygqGbGEhYApjSDtufBU="; pin-sha256="AMRT67hN1KPI+u7Aw9JpZlzyRaKeO+6u2H+jtOmWVy8="
    Strict-Transport-Security: max-age=31536000; includeSubdomains
    Content-Security-Policy: script-src 'self' 'unsafe-inline' 'unsafe-eval'

- url: /unsupportedbrowser
  static_files: unsupportedbrowser.html
  upload: unsupportedbrowser.html
  secure: always
  http_headers:
    Cache-Control: no-store
    X-Frame-Options: deny
    Public-Key-Pins: max-age=31536000; includeSubdomains; pin-sha256="8jdS3zcG5kUApHWDrLH5Q8wEygqGbGEhYApjSDtufBU="; pin-sha256="AMRT67hN1KPI+u7Aw9JpZlzyRaKeO+6u2H+jtOmWVy8="
    Strict-Transport-Security: max-age=31536000; includeSubdomains
    Content-Security-Policy: script-src 'self' 'unsafe-inline' 'unsafe-eval'


# Else

- url: /(.*)
  static_files: \1
  upload: .*
  secure: always
  http_headers:
    Cache-Control: public, max-age=0
    X-Frame-Options: deny
    Public-Key-Pins: max-age=31536000; includeSubdomains; pin-sha256="8jdS3zcG5kUApHWDrLH5Q8wEygqGbGEhYApjSDtufBU="; pin-sha256="AMRT67hN1KPI+u7Aw9JpZlzyRaKeO+6u2H+jtOmWVy8="
    Strict-Transport-Security: max-age=31536000; includeSubdomains
    Content-Security-Policy: script-src 'self' 'unsafe-inline' 'unsafe-eval'
